# BC范式(BCNF)

​    定义2.11   设*R*(*U*)是一个关系模式且*R*(*U*) ∈1*NF*，如果对于*R*(*U*)中任意一个非平凡的函数依赖*B*→*C*，*B*必含有候选码，则称*R*(*U*)属于*BC*范式，记为*R*(*U*)∈*BCNF*。

+ 如果要求B→C为非平凡的且完全的，则要求该函数依赖的决定因素为候选码即可。
+ 在BC范式的定义中并没有明确提出其中的关系要属于3NF，但是该定义确实保证了“其非主属性既不部分函数依赖于候选码，也不传递函数依赖于候选码”，因而BCNF为3NF的一个子集，即BCNF⊆3NF。
+ 对于BC范式中的每一个关系R(U)，它们具有下列的性质：
  + R(U)中的每一个非主属性都完全函数依赖于任何一个候选码。假设存在一个非主属性attr部分函数依赖于一个候选码$B_0$，即$B_0$ $\stackrel{p}{\rightarrow}$ attr。由部分函数依赖的定义，必存在B0的一个真子集B0′，使得B0′→attr。由于B0′→attr是一个非平凡函数依赖。根据BCNF的定义，B0′必包含某一个候选码C0。由于候选码B0的真子集包含该候选码C0，所以B0也包含C0且C0异于B0。这说明一个候选码包含一个异于自己的另外一个候选码，这是不可能的。
  + R(U)中的每一个主属性完全函数依赖于任何一个不包含它的候选码。假设存在一个主属性attr并非完全函数依赖于某一个不包含它的候选码B0。当选择该候选码B0为主码时，attr也不完全函数依赖于主码B0。这与主码的定义相矛盾。
  + R(U)中没有属性完全函数依赖于非候选码（包括主码）的属性集。假设存在一个异于任何一个候选码的属性集B0和某一个属性attr，使得属性attr完全函数依赖于B0，即B0 $\stackrel{f}{\rightarrow}$attr。但由于B0 $\stackrel{f}{\rightarrow}$attr，所以显然有B→attr。由BCNF的定义，B0必包含某一个候选码C0。因为B0异于任何一个候选码，所以B0≠C0，因而B0真包含C0，C0为B0的一个真子集。由于C0为候选码，所以C0→attr。这说明，存在B0的一个真子集C0，使得C0→attr。但这与B0 $\stackrel{f}{\rightarrow}$ attr相矛盾。

 

​      定理2.3  设*R*(*U*)是一个关系模式，且*R*(*U*)$\in$3*NF*，如果*R*(*U*)只有一个候选码，则*R*(*U*)$\in$*BCNF*。

> ​     证明：对于*R*(*U*)中任意一个非平凡函数依赖*C*→*D*，假设*R*(*U*)唯一的候选码为*B*，只要证明*C*包含*B*即可。

> ​     假设*C*不包含*B*，即*B ⊄* *C*。由于*B*为候选码，所以*B*   $\stackrel{f}{\rightarrow}$   *U*，进而可知*B*→*U*。因为*C*和*D*都为*U*的子集，所以由Armstrong公理，*U*→*C*，*U*→*D*，于是*B*→*C*，*B*→*D*；由于*C*→*D*为非平凡函数依赖，所以*D ⊄C*；由于*C*是任意的，所以*C*    *B*；加上条件假设*B* ⊄*C*，于是：

> ​         *D ⊄* *C*，*B ⊄* *C*，*C* $  \rightarrow \mkern-16.5mu/  $   *B*

> ​          *B*→*C*

> ​          *C*→*D*

> ​          *B*→*D*

> ​    *D*传递依赖于*B*，这与*R∈*3*NF*矛盾。证毕。



​    特别地，在一个属于3*NF*的关系中，**当仅有一个属性能够唯一标识每个元组时，则这个关系属于BCNF**，且该属性为唯一的候选码（也只能以它为主码）。

 

 

>   【例2.11】观察例2.10中分解后形成的关系模式：emp_info2(Eno, Ename, Dept)

> 该关系模式中既没有部分函数依赖也没有传递依赖，所以属于3NF。且由于仅有唯一的属性Eno能够唯一标识每一个元组，所以这个关系属于BCNF。  

> 定理2.3看起来非常简单，但它非常有用。在许多情况下，设计的关系往往都是有且仅有一个能够唯一标识每一个元组的属性，这时只要保证不存在对该属性的部分函数依赖和传递函数依赖即可保证该关系属于BCNF，而不用对BCNF的定义进行验证，从而避免了复杂的验证过程，提高设计效率。

> 定理2.3中的条件只是一个关系属于BCNF的充分条件，但不是必要条件。也就是说，满足该定理条件的关系必属于BCNF，但不满足该定理条件的关系也可能属于BCNF，如例2.12。

 

 

>   【例2.12】 对于学生住宿关系模式StuDom(学号, 姓名系别, 宿舍)而言，假定“姓名”属性也具有唯一性，那么关系模式StuDom拥有两个由单属性组成的候选码，分别是“学号”和“姓名”。由于非主属性，即“系别”和“宿舍”，不存在对任一候选码的部分或传递函数依赖，所以关系模式StuDom属于第三范式。同时关系模式StuDom中除“学号”和“姓名”外没有其它决定因素，所以StuDom关系模式属于*BC*范式。

> 此例中，关系模式StuDom有两个候选码，分别是“学号”和“姓名”，而不是只有一个候选码（不满足定理2.3的条件），但它却属于*BC*范式。

> 那么有没有属于第三范式的关系模式却不属于*BC*范式的情况呢？

 

>    【例2.13】对教学关系模式Teach(学生, 教师, 课程)，若每一名教师只教授一门课，每门课可由多名任课教师教授，某一名学生选定某门课即对应一个固定的教师。得到下述函数依赖集：

> ​     {学生, 课程}→教师

> ​     {学生, 教师}→课程

> ​     教师→课程

> {学生, 课程}和{学生, 教师}均是候选码。因为没有任何非主属性对码的传递函数依赖或部分函数依赖，故关系模式Teach属于三范式。关系模式Teach不属于BC范式，因为函数依赖“教师→课程”的决定因素——“教师”不含任一候选码。

 如果一个关系模型中的关系模式都属于BCNF，则称该关系模型满足BCNF，称基于该关系模型的关系数据库满足BCNF。

 一个满足BCNF的关系数据库已经极大地减少数据的冗余，对所有关系模式实现了较为彻底的分解，消除了插入异常和删除异常，已经达到了基于函数依赖为测度的最高规范化程度。

 